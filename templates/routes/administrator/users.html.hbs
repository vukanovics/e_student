{{! vim: set ft=html: }}

{{#*inline "body"}}
<div class="overflow-x-auto overflow-hidden lg:w-fit w-[90vw]">
  <form class="flex flex-col items-center py-16 space-y-32 min-w-max lg:space-y-16 lg:py-8" action="" method="post">
    <div class="grid grid-cols-6 items-end">
      {{! Filters }}
      <div>
        {{> components/label id="filer_first_name" text=(i18n "Име")}}
        {{> components/input_cell_text icon="la-user" border="border-ccuser" class="bg-ccuser" field_name="filter_first_name" value=form.filter_first_name}}
        {{> components/input_select_sort field_name="sort_first_name" previous=form.sort_first_name border="border-ccuser" class="bg-ccuser"}}
      </div>
      <div>
        {{> components/label id="filter_last_name" text=(i18n "Презиме")}}
        {{> components/input_cell_text icon="la-users" border="border-ccuser" class="bg-ccuser" field_name="filter_last_name" value=form.filter_last_name}}
        {{> components/input_select_sort field_name="sort_last_name" previous=form.sort_last_name border="border-ccuser" class="bg-ccuser"}}
      </div>
      <div>
        {{> components/label id="filter_email" text=(i18n "Имејл адреса")}}
        {{> components/input_cell_text icon="la-envelope" border="border-ccemail" class="bg-ccemail" field_name="filter_email" value=form.filter_email}}
        {{> components/input_select_sort field_name="sort_email" previous=form.sort_email border="border-ccemail" class="bg-ccemail"}}
      </div>
      {{! TODO: Make this into a component}}
      <div>
        <div class="flex flex-row items-center">
          {{> components/label id="filter_account_type_enabled" text=(i18n "Филтрирај према типу налога")}}
          <input type="checkbox" name="filter_account_type_enabled" {{#if form.filter_account_type_enabled}}checked{{/if}}>
        </div>
        {{> components/input_select_account_type field_name="filter_account_type" previous=form.filter_account_type icon="la-user-circle" border="border-ccacctype" class="bg-ccacctype" text=(i18n "Тип налога")}}
        {{> components/input_select_sort field_name="sort_account_type" previous=form.sort_account_type border="border-ccacctype" class="bg-ccacctype"}}
      </div>
      <div>
        <div class="flex flex-row flex-shrink">
          {{> components/input_cell_text border="border-ccuser" class="bg-ccuser" field_name="filter_program" value=form.filter_program}}
          {{> components/input_cell_text border="border-ccuser" class="bg-ccuser" field_name="filter_index_number" value=form.filter_index_number}}
          {{> components/input_cell_text border="border-ccuser" class="bg-ccuser" field_name="filter_generation" value=form.filter_generation}}
        </div>
        {{> components/input_select_sort field_name="sort_index" previous=form.sort_index border="border-ccuser" class="bg-ccuser"}}
      </div>
      <div class="h-full">
        {{> components/button_table button_text=(i18n "Примени")}}
      </div>
      
      {{#each users}}
        {{#if this.first_name}}
          {{> components/cell_text text=this.first_name}}
        {{else}}
          {{> components/cell_text text=(i18n "Није намештено")}}
        {{/if}}
        {{#if this.last_name}}
          {{> components/cell_text text=this.last_name}}
        {{else}}
          {{> components/cell_text text=(i18n "Није намештено")}}
        {{/if}}
        {{> components/cell_text text=this.email}}
        {{> components/cell_text text=this.account_type}}
        {{#if this.index}}
        {{> components/cell_text text=(concat this.program.short_name this.index.number "/" this.generation.year)}}
        {{else}}
        {{> components/cell_text text=(i18n "Нема број индекса")}}
        {{/if}}
        <div class="flex flex-row items-center">
          {{> components/button_link_table button_href=(concat "users/delete/" this.id) button_text="Delete"}}
          {{> components/button_link_table button_href=(concat "users/edit/" this.id) button_text="Edit"}}
        </div>
        {{/each}}
    </div>
  </form>
</div>
<div class="flex">
  {{> components/button_link button_href="users/create" button_text="Create a new user"}}
</div>
{{/inline}}
{{> base }}
